\subsection{Functional requirements}
\par
The functional requirements will be listed with different way:
\begin{itemize}
\item Some will be called core requirements, which is necessary to satisfy more or less every goals in a simple way (e.g. registration, log-in, ...)
\item Other requirements are listed together with the goal which they satisfy
\end{itemize}

\subsubsection{Core requirements}
\par
The following requirements are, principally, about identifying a specific person on the system:
\begin{itemize}
\item[{[R1]}] Allow a person to register into the system as a user by providing a username, a password, his credentials, his social security number and a consensus on the agreement
\item[{[R2]}] Allow a person or company to register into the system as a third party by providing an e-mail, a password, its credentials and a consensus on the agreement
\item[{[R3]}] A person cannot register as a user by inserting a username that has already been used in another successful registration process
\item[{[R4]}] A person cannot register as user by using the same social security number used in another successful registration process 
\item \st{[{[R5]}] A person cannot register as user by using the same credential used in another successful registration process}
\item \st{[R6] A person or company cannot register as third party into the system by using the same credentials used in another successful process}
\item[{[R7]}] A person or company cannot register as third party by using the same e-mail used in another successful registration process
\end{itemize}
\par
After the registration, another essential functionality of the system is to permit log-in:
\begin{itemize}
\item[{[R8]}] Allow a person to log into the system as a user only if he has already registered as such
\item[{[R9]}] Allow a person or company to log into the system as a third party only if he has already registered as such
\end{itemize}

\subsubsection{Goal reaching requirements}
\par
In this section, each requirement is necessary to satisfy specific goals of the system:
\begin{itemize}
\item[{[G1]}] Allow a user to access its own data
	\begin{itemize}
	\item[{[R10]}] If a user is logged-in, he is able to view its own data
	\end{itemize}
\item[{[G2]}] Allow a user to contribute to data sharing by providing information about his location and health status
	\begin{itemize}
	\item[{[D1]}]  User's smartphones are equipped with GPS sensor
	\item[{[D2]}] Users own devices with sensors to acquire data information about health status
	\item[{[D3]}] Health data collected by the devices are correct
	\item[{[D6]}] There is at least a messaging protocol of trusted companies which provides the possibility to transfer data from devices containing sensors to acquire health data, to smartphones
	\item[{[R11]}] Allow a user to send its data to the system automatically when it is generated
	\end{itemize}
\item[{[G3 \& G4]}] Once the health parameters of a user have been observed 
below the threshold for the first time after one hour, an ambulance is sent to the user location. 
The time experienced between the moment in which the health parameters of a subscribed user are observed below the threshold and the time in which the emergency point is contacted is equal or less than 5 seconds
	\begin{itemize}
	\item[{[D5]}] There is at least an external service of trusted companies which provides the possibility to make calls
	\item[{[D8]}] Hospitals always accept new SOSCall.
	\item[{[D9]}] If SOSCall are accepted, then an ambulance is sent to the location mentioned by the call
	\item[{[D13]}] Hospitals are always reachable through help calls.
	\item[{[R12]}] When a user's health parameters has been observed below the threshold, an SOSCall is requested within 5 seconds
	\item[{[R13]}] All the automated SOS call are performed with devices of users whose health parameters are observed below a certain threshold
	\item[{[R14]}] An SOSCall can be requested only every minute
	\item[{[R15]}] An SOSCall is blocked if a previous one has already been accepted within one hour
	\item[{[R16]}] An SOSCall is implemented as an automated call by using an external API
	\item[{[R17]}] During an SOSCall, the GPS is set on high-precision
	\end{itemize}
\item[{[G5]}] Allow a user to participate in a run managed by third parties, as an athlete, if all starting conditions are satisfied.
	\begin{itemize}
	\item[{[D14]}] Every user enrolled in a run are able to participate in the run as athletes if all starting conditions are satisfied
	\item[{[R18]}] Allow a user to view a list of available runs, i.e. those that are still waiting to start 
	\item[{[R19]}] Allow a user to enroll in a run, after choosing it from the list, only before the expiration date by specifying his nickname
	\item[{[R20]}] Allow a user to unsubscribe from an enrolled run only before the expiration date
	\item[{[R21]}] If, after the expiration date, the number of participants is less than the minimum number defined by the organizer, then it is impossible to start the run.
	\item[{[R22]}] If the run cannot start due to minimum number of participants unsatisfied, then the enrolled runners are notified.
	\end{itemize}
\item[{[G6]}] Allow spectators (i.e. user) to see on real-time the "correct" positions of all athletes taking part in a run, with at most 15 meters of radius error
	\begin{itemize}
	\item[{[D4]}] There is at least an external service of trusted companies which provides the possibility to the user to view detailed maps
	\item[{[D11]}] When a user's phone GPS is set on high precision, then it provides the right position with at most a radius error ranged from 0 to 10 meters
	\item[{[D12]}] Athlete participating in a run are equipped with a device sharing GPS position set on high precision
	\item[{[R23]}] Every athlete participating on a run, only on this specific occasion, shares continuously (i.e. each ten seconds) its position through a device
	\item[{[R24]}] Allow a spectator to see on a map the real-time position of every athlete in a specific run
	\end{itemize}
\item[{[G7]}] The maximum time to accept an individual request from any third party is 30 days; after that, the request will expire
	\begin{itemize}
	\item[{[R25]}] Once the time elapsed from sending request is greater than 30 days, then the request will be deleted from the system
	\end{itemize}
\item[{[G8 \& G9]}] Allow a user to accept or refuse a request from third parties. Allow a user to block requests made by a specific third party and all the pending requests will be refused: this action is possible only when the user has already refused one request made
by the customer that he is intending to block. 
	\begin{itemize}
	\item[{[R26]}] Allow a user to receive individual requests about data sharing from third parties
	\item[{[R27]}] Allow a user to view a list of pending requests
	\item[{[R28]}] Allow a user to accept or refuse a request from the list of pending request
	\item[{[R29]}] Allow a user to block requests from a defined third party, after having refused a request made by the customer
	involved in the block.
	\item[{[R46]}] When a request it is blocked, the other requests sent by the same Third party to the same user are refused.
	\end{itemize}	
\item[{[G10]}] Allow spectators and runners to see the leaderboard, when a run is completed
	\begin{itemize}
	\item[{[R30]}] Allow an organizer to close the run (when it is terminated)
	\item[{[R31]}] After a run is closed, the leaderboard is shown to the spectators and runners
	\item[{[R32]}] After a day is elapsed from the date of the race, if the run is not closed the application will automatically close it.
	\end{itemize}
\item[{[G11]}] Allow organizers (i.e. third parties) to set up a run, by defining its name, its path, date, start time, expiration date, and the minimum number of participants
	\begin{itemize}
	\item[{[D4]}] There is at least an external service of trusted companies which provides the possibility to the user to view detailed maps
	\item[{[D10]}] The service which shows the map of the world offers only paths that are feasible.
	\item[{[R33]}] Allow a third party to see a map of the world with feasible paths
	\item[{[R34]}] Allow a third party to publish a race by providing an unique name, a feasible and a non-overlapping path (non-overlapping with other races of the same date), a date, a start time, a brief description, an expiration date for subscription and a minimum number of participants
	\item[{[R45]}] Allow a third party to manage its run by giving him a list of its managed race
	\end{itemize}
\item[{[G12]}] Allow a third party to access data specified in a request if the user accepts the request or if he accepted one or more requests from the same third party that provided access to the same data 
	\begin{itemize}
	\item[{[R35]}] If an individual request is accepted, then the third party who has made the request can access the data specified in the request
	\item[{[R36]}] For each piece of individual data accessible by a third part customer, exists an accepted request regarding it, performed by the same third party 
	\item[{[R37]}] Allow a user to accept or refuse request given by third parties
	\item[{[R38]}] Allow a third party to send individual requests to users by providing the user's social security number and a brief motivation
	\end{itemize}
\item[{[G13]}] Allow a third party to access statistical and anonymized data if and only if the number of individual involved is greater than 1000. This is satisfied after the request is approved  
	\begin{itemize}
	\item[{[R39]}] A group request is accepted if the aggregated data specified in the request is accessible to the third party who performed the demand
	\item[{[R40]}] Group requests are accepted if and only if the number of user involved is greater than 1000
	\item[{[R41]}] Aggregated data is accessible to a third party if an accepted aggregated data that request that data exists
	\item[{[R42]}] Allow a third party to send group request to the system regarding data about many users
	\end{itemize}
\item[{[G14]}] Allow a third party to subscribe to non-existing data. They will have access to them, after the data is generated. 
	\begin{itemize}
	\item[{[R43]}] Allow a third party to express a data request on future data
	\item[{[R44]}] A third party can have access to non-existing aggregated data regarding future information if and only if the number of people involved will be greater than 1000
	\end{itemize}
\end{itemize}

\input{requirementsFolder/useCase}

\subsubsection{Sequence diagrams}
To provide a better understanding of the interaction of some processes, the following diagrams are shown:
\begin{itemize}
\item Send individual request process
\begin{figure}[H]
\includegraphics[width=\linewidth]{Images/requestsequence}
\caption{Sequence diagram about the process of sending a request }
\label{fig:sequencediagram1}
\end{figure}
In this sequence diagram, it is assumed that the request is created correctly, since the most important things are the relationships with TrackMe and the other actors.

\item SOSCall process: the sequence diagram is designed by assuming that the process starts when the application has detected a health parameter below threshold for the first time within one hour.
\begin{figure}[H]
\includegraphics[width=\linewidth]{Images/callsequence}
\caption{Sequence diagram about the process of an SOS call }
\label{fig:sequencediagram2}
\end{figure}

\item Publish race process: in this sequence diagram, it is shown how the organizer, i.e. third party, can publish a race to be seen by potential athletes that want to participate.
\begin{figure}[H]
\includegraphics[width=\linewidth]{Images/racesequence}
\caption{Sequence diagram about the process of how a race is published}
\label{fig:sequencediagram3}
\end{figure}

\end{itemize}